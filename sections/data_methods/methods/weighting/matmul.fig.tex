
%%%
% TikZ diagram here of matrix multiplication and where each vector/matrix comes
% from
%%%

\begin{figure}[h]
\centering
\begin{tikzpicture}
	\centering

\tikzset{ node style ge/.style={circle,minimum size=1cm} }

% grid for weights
\draw[step=2mm,gray,very thin] (-2,-2) grid (2,2);
% black out one grid element
\fill[black] (-0.6,-0.6) rectangle (-0.4,-0.4);
	% hidden node for drawing arrows later
	\node (FilledInWeight) at (-0.4,-0.5) {};

	\node (GridTopLeft) at (-2.1,2.1) {};
	\node (GridTopRight) at (2.1,2.1) {};
	\draw [decorate, decoration={brace,amplitude=10pt},xshift=0pt,yshift=9pt]
		(GridTopLeft) -- (GridTopRight);
	\node (wt) at (0,2.65) {Weights Table};

% w vector
\draw[step=5mm,gray,very thin] (2.99,0) grid (7,0.5);
	% hidden node to left for arrows
	\node (WLeft) at (2.98,0.25) {};
	\node (WText) at (5,0.75) {$\wvecm_{p,o,d}$};

% draw arrow between weights table and individual weight
\draw[->, very thin] (FilledInWeight) -- (WLeft);

% S matrix
\matrix (S) [matrix of math nodes,%
             nodes = {node style ge},%
             left delimiter  = (,%
             right delimiter = )] at (11.5,0)
{%
	s_{1,1} & s_{1,2} & \ldots & s_{1,n}  \\
	s_{2,1} & s_{2,2} & \ldots & s_{2,n} \\
	\vdots & \vdots & \ddots & \vdots  \\
	s_{m,1} & s_{m,2} & \ldots & s_{m,n}  \\
};
	\node (SText) at (11.5,2.6) {\Smat};

% multiplication symbol
\node (multsymb) at (8,0.2) {\huge $\times$};


\node (CurlyBracketLeft) at (3,-2.5) {};
\node (CurlyBracketRight) at (14,-2.5) {};
	\draw [decorate, decoration={brace,amplitude=30pt,mirror}, xshift=0pt, yshift=9pt]
		(CurlyBracketLeft) -- (CurlyBracketRight);


% graph of a probability distribution for visual's sake
\draw (5.2, -7) .. controls (6.5,-3) and (8.3,-7) .. (11.2, -7);


% p vector
\draw[step=4mm,gray,very thin] (5.18,-8) grid (11.22,-7.6);
	% hidden node
	\node (PCenter) at (7.8, -7.8) {};

% p text
\node (PText) at (8.5,-7) {\pvec};




\end{tikzpicture}



\caption{A visual depiction of the weighting operation.}
\label{fig:matmul-proc}
\end{figure}
